title: Siril 教程：天文摄影中的图像堆栈与处理
date: 2025-12-05 10:56:33

---

天文摄影让我们能够捕捉夜空之美，但由于长曝光时间和低光条件，单张图像往往包含噪声且缺乏细节。为了克服这一问题，天文摄影师使用一种称为图像堆栈的技术。通过组合同一场景的多张图像，我们可以增强信噪比并揭示更多天体细节。

在本指南中，我将带你了解使用 Siril 堆栈天文摄影图像的过程，Siril 是一款专为天文图像处理设计的功能强大的免费软件。

![堆栈后的 M31 仙女座星系](46.png)

## 为什么使用 Siril？


Siril 是一款专为天文摄影图像叠加而设计的软件，提供一系列强大的工具，能满足高质量天文图像处理的需求。其核心功能包括精密的对齐与校准工具，可修正由大气和光学因素引起的偏移与畸变，从而生成清晰准确的叠加图像。Siril 的叠加算法在弱光天文摄影中能有效抑制噪点，同时保留精细细节，呈现出明亮生动的画面。此外，Siril 还提供背景提取、色彩校准与测光色偏校正功能，能增强天体的自然色彩。该软件同时支持自动化流程与手动调控，兼顾从新手到高阶用户的不同需求。作为一款免费开源工具，Siril 持续保持更新，是天文学爱好者强大且易用的理想选择。


## 安装 Siril

你可以从 [siril.org](https://siril.org) 下载安装最新的 Siril。

## 前置条件

进行图像叠加处理时，您需要准备一组针对同一天体或相同天区的多张图像。请确保这些图像在相似的拍摄条件和一致的参数设置下获得，以实现最佳的叠加效果。您使用的图像数量越多，最终成像质量越好，因为叠加处理能有效抑制噪点并增强细节表现。


## 实践天文摄影图像堆栈

你可以从以下资源下载用于天文摄影图像叠加的练习素材，以获得实际操作经验：

- [Astropix](https://astropix.com)
- [AstroBackyard](https://astrobackyard.com)

这些资源提供了出色的数据集，可供您练习图像叠加与后期处理技巧。

## 图像校准

本部分将说明如何在 Siril 中为图像叠加整理文件。

### 在 Siril 中组织图像文件以进行堆栈

在使用 Siril 处理天文摄影图像前，妥善整理文件至关重要。

1. 首先，以你处理的天体或星团名称创建一个主目录。（例如：M31 - 仙女座星系）

![创建主目录](one.png)

2. 在该目录内，创建四个子文件夹：lights、darks、biases 和 flats。


![创建子目录](two.png)

* **Lights**：将所有目标天体的原始图像（计划用于叠加的图片）放入 lights 文件夹。
* **Darks**：将暗场图像放置于此，用于校正传感器噪声。
* **Biases**：将偏置场图像添加到此文件夹，以校正读取噪声。
* **Flats**：存储平场图像，用于校正传感器暗角或灰尘影响。

3. 在此步骤中，我们仅将亮场文件（原始图像）放入 lights 文件夹。本指南将仅使用这些亮场图像进行操作。

![放置光学文件](three.png)

**注意**：这些目录至关重要，因为 Siril 的内置脚本依赖它们来执行叠加流程。如果未正确创建这些目录并放入对应的图像文件，脚本将无法运行，您会遇到错误。遵循此结构能确保叠加工作流程顺利进行。

## 启动 Siril

### 设置工作区

默认情况下，Siril 启动时的工作目录可能与您存储图像的目录不同。为确保 Siril 能够访问您的图像并正确执行叠加操作，请按以下步骤更改工作目录：


1. 打开 Siril：在您的计算机上启动 Siril。


![打开 Siril](four.png)

2. 要更改 Siril 中的当前工作目录，请点击窗口左上角的**主页**图标。

![主页图标位置](five~2.png)

3. 此操作将打开文件浏览器，您可以导航至并选择存储图像文件的目录。

![文件浏览器界面](seven~2.png)

4. 导航至包含 lights、darks、flats 和 biases 文件夹的目录后，点击**打开**，将此目录设为 Siril 的工作目录。

![确认目录选择](eight~2.png)

现在，Siril 已设置为在指定目录中处理图像。您可以通过查看 Siril 窗口左上角显示的当前工作目录路径来确认这一点。

### 安装脚本

1. 点击 Siril 窗口右上角的**三横线菜单**图标。

![三横线菜单图标](nine~2.png)

2. 点击**获取脚本**。

![Get Scripts 选项](ten~2.png)

3. 点击后，系统将跳转至 Siril 的官方文档页面。在该页面的**获取更多脚本**章节下找到 [GitLab](https://gitlab.com/free-astro/siril-scripts) 链接并点击进入。

![GitLab 链接](111.png)

4. 点击 **preprocessing** 目录。

![Preprocessing 选择](122.png)

5. 点击 **OSC_Preprocessing_WithoutDBF.ssf** 文件。


![OSC_Preprocessing_WithoutDBF.ssf 脚本](13.png)

**注意**：我们将下载 **OSC_Preprocessing_WithoutDBF.ssf** 脚本，因为本教程仅使用亮场图像进行处理。

6. 下载 **OSC_Preprocessing_WithoutDBF.ssf** 脚本文件。

![下载脚本](144.png)

下载脚本后，请将其放置在以下目录中：

`/This PC/Local Disk (C:)/Program Files/Siril/scripts/`

一旦脚本正确安装并放置在正确的目录中，你就可以开始在 Siril 中进行堆栈工作流程了。

### 图像堆栈

1. 点击顶部菜单中的**脚本**。

![Scripts 菜单](15~2.png)

2. 从可用脚本列表中选择 **OSC_Preprocessing_WithoutDBF**。

![选择脚本](16~2.png)

3. 点击**运行**以执行该脚本。

![Run 按钮](17~2.png)

4. 等待脚本执行完成。你可以在控制台窗口中查看执行进度。

![控制台进度窗口](18~2.png)

最终叠加完成的图像将保存在名为 **M31** 的主目录中。

5. 要打开最终叠加图像，请点击顶部菜单中的**打开**。



![Open 菜单选项](19~2.png)

最终叠加完成的图像将命名为 **result.fit**，并以 FITS 格式保存。



6. 选择 **result.fit** 文件，然后点击底部的**打开**按钮以加载图像。

![选择 result.fit 文件](20~2.png)

7. 这是 M31 原始叠加图像在**线性视图**下的显示效果。

![原始堆栈图像显示](21~2.png)

8. 要从"线性"视图切换到"自动拉伸"视图，只需点击**线性**按钮，然后选择**自动拉伸**以调整图像显示效果。

![Linear 到 Autostretch 切换](22~2.png)

![Autostretch 视图](23~2.png)

**注意**：自动拉伸会对图像数据进行临时拉伸，使微弱细节更易见，但不会永久改变原始数据。这在对叠加图像进行进一步后处理前，用于预览非常有用。

![Autostretch 结果](24~2.png)

**注意**：对叠加图像应用自动拉伸后，你可能会注意到绿色噪点。这很常见，可以在后续处理中进行校正。


9. 要切换到**直方图视图**，请从视图选项中选择**直方图**。切换到直方图视图可以让您更精细地控制图像的色调范围，从而更好地观察细节和调整曝光。

![直方图视图](26~2.png)

在直方图视图中，您可以看到图像像素值的分布情况。该视图有助于调整亮度和对比度。


## 背景提取

背景提取是天文学图像处理中至关重要的一步。它有助于去除图像中不需要的背景噪声或背景亮度变化，让天体目标更加清晰地显现出来。在本节中，我们将详细介绍在 Siril 中执行背景提取的步骤。

在开始后处理之前，首先需要裁剪掉在直方图视图中可见的图像边缘的畸变和噪声。

1. 要进行裁剪，请在图像上**左键单击**，拖动鼠标框选您希望保留的区域，然后**右键单击**并选择**裁剪**以应用更改。

![裁剪工具界面](27~3.png)

裁剪完成后，请切换回**自动拉伸**视图以增强图像可见度，然后开始**背景提取**流程。

2. 导航至**图像处理**菜单。

Siril 中的背景提取是一个帮助去除天文图像中不需要的背景噪声或亮度变化的过程。

![Image Processing 菜单](28.png)

3. 选择**背景提取**。

![Background Extraction 选择](29.png)

4. 点击**生成样本**。



![生成采样点](33.png)

**注意**：Siril 利用这些样本来估计背景强度以及由光污染或传感器噪声等因素引起的亮度梯度。选择样本后，Siril 会从图像中减去估算出的背景模型，从而获得更干净、更均匀的背景。


5. 为确保背景提取的准确性，请**右键单击**删除任何离明亮恒星或天体过近的样本。这有助于避免图像中天体的干扰，确保只对背景进行建模。



![在亮星附近移除采样点](30.png)

6. 点击**计算背景**以完成此步骤，然后点击**应用**。



![计算背景并应用](31.png)

应用背景提取后，您将注意到图像质量有显著提升。背景噪声和亮度变化将减少，使天体目标更加清晰地凸显出来。


## 测光色彩校准

在天文摄影图像叠加中，测光色彩校准对于校正由光污染、传感器特性及不同曝光条件等因素引起的色彩失衡至关重要。在 Siril 中，此过程通过调整叠加图像的色彩，使其与天体的真实色彩相匹配，从而确保结果准确且自然。Siril 通过分析图像中恒星及其他天体的色彩，并调整红、绿、蓝通道以消除任何不必要的色偏来实现这一校准。这项校准对于生成科学准确且视觉一致的图像至关重要，尤其是在叠加多帧具有不同色彩偏差的图像时。



1. 要进行测光色彩校准，请点击**色彩校准**。



![Color Calibration 菜单](50.png)

2. 选择**测光色彩校准**。

![Photometric Color Calibration](51.png)

随后将弹出一个窗口，您需要输入星表编号以匹配对应的赤经与赤纬坐标。若您使用望远镜拍摄，坐标信息通常会**自动显示**；若使用数码单反相机拍摄，坐标值**默认可能为零**。

对于 M31（仙女座星系）图像进行校准时，其星表编号为 **NGC 224**。

![输入星表编号窗口](52.png)

你可以从多种星表（如 VizieR、SIMBAD 或 CDS）中选择，以确保坐标与正确的星表条目匹配。

为提高校准精度，请补充输入望远镜的**焦距**和**像素尺寸**。这些参数有助于根据您的设备配置优化测光校正效果。

填写完所有必要信息后，点击**确定**。


## 去除绿色噪点

绿色噪点是天文摄影图像中常见的问题，尤其在使用某些相机或传感器时更为明显。它表现为图像中出现绿色调或色偏，会影响最终图像的整体质量和色彩准确性。去除绿色噪点对于获得更均衡、自然的图像至关重要。

1. 如果图像中仍存在绿色噪点，请点击**去除绿色噪点**将其消除。

![Remove green noise 选项](34.png)

2. 保持默认选项不变，直接点击**应用**即可。

![Remove green noise 设置](35.png)

![去噪后的结果](36.png)

去除绿色噪点后，图像变得更干净，色彩也更均衡了。


## 图像拉伸

图像拉伸是天文学图像处理中至关重要的一步。它能增强叠加图像中微弱细节和色彩的可见度，使图像更具视觉吸引力。在本节中，我们将详细介绍有效拉伸图像的步骤。



1. 将视图切换为**线性视图**，然后点击**直方图变换**对图像进行拉伸。

![Histogram Transformation](40.png)

2. 点击 **clip(%)** 上方的图标，应用自动拉伸算法。

![Autostretch 算法图标](41.png)

3. 选择 **Asinh** 变换。此调整将增强图像中的细节表现。



![Asinh 变换选择](37.png)

4. 将**拉伸因子**调整至最大值，以增强图像的对比度和细节。



![拉伸因子调整](38.png)

5. 点击**应用**以使更改生效。

## 应用色彩调整

1. 点击**色彩饱和度**选项，以增强图像中色彩的生动度。

![Color Saturation 选项](42.png)

2. 选择**全局**，以使用多种色彩调整选项。

3. 选定所需的色彩选项后，通过调整**数量**滑块来增加色彩饱和度。点击**应用**以确认并应用更改，从而提升图像的色彩活力。

![色彩饱和度调整](43.png)

![色彩饱和度调整](46.png)

这是最终叠加图像的处理结果。你可以使用各类照片编辑软件进一步微调和增强，以进行更多调整与优化。


4. 点击右上角的**保存**或**下载**选项，以保存最终结果图像。

![保存/下载按钮](47.png)

5. 保存图像时，你可以根据需求选择不同的文件格式。



![文件格式选择](49.png)

6. 点击**保存**以下载最终图像。



## 结论


总的来说，Siril 对于天文摄影师而言是一款极其强大的工具，它提供了一系列功能，使图像叠加和校准等复杂任务变得更为简易。其通过多种脚本实现的自动化支持尤为突出，能为您节省大量时间和精力，尤其是在处理大量图像时。然而，要获得最佳效果，仍需在掌握工作流程上投入一定的耐心与实践。

需要注意的是，本指南专为使用望远镜进行天文摄影的初学者设计，并未涵盖更高级的技术，例如广义双曲拉伸变换、反卷积、降噪，或像 StarNet 这类高级星点处理工具。

若您希望深入了解这些领域，我强烈推荐您访问 [Deep Space Astro](https://www.youtube.com/@DeepSpaceAstro) 的 YouTube 频道，那里提供了关于高级图像处理技巧的详尽教程。

## 致谢

图像来源于 [Astropix](https://astropix.com) 和 [AstroBackyard](https://astrobackyard.com)，感谢他们通过高质量天文摄影资源做出的"宝贵贡献"。

---

*本教程翻译自 [https://sathvikacharyaa.github.io/sirilastro/](https://sathvikacharyaa.github.io/sirilastro/)*

